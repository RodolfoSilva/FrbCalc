<ion-header>

  <ion-navbar>
    <ion-title>Disciplina</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
  <form [formGroup]="disciplinaForm" (ngSubmit)="save()">
    <ion-list>

      <ion-item no-padding>
        <ion-label floating>Disciplina</ion-label>
        <ion-input type="text" name="titulo" formControlName="titulo" [(ngModel)]="disciplina.titulo"></ion-input>
      </ion-item>
      <ion-item no-padding no-lines text-wrap *ngIf="disciplinaForm.controls.titulo.invalid  && (disciplinaForm.controls.titulo.dirty || disciplinaForm.controls.titulo.touched)">
        <p color="danger">Insira o nome da disciplina</p>
      </ion-item>

      <ion-item no-padding>
        <ion-label floating>Nota da AP1</ion-label>
        <ion-input type="number" name="ap1" formControlName="ap1" [(ngModel)]="disciplina.notas.ap1" step="0.1"></ion-input>
      </ion-item>
      <ion-item no-padding no-lines text-wrap *ngIf="disciplinaForm.controls.ap1.invalid  && (disciplinaForm.controls.ap1.dirty || disciplinaForm.controls.ap1.touched)">
        <p color="danger">Nota inválida, insira uma nota entre 0.1 e 10</p>
      </ion-item>

      <ion-item no-padding>
        <ion-label floating>Nota da AP2</ion-label>
        <ion-input type="number" name="ap2" formControlName="ap2" [(ngModel)]="disciplina.notas.ap2" step="0.1"></ion-input>
      </ion-item>
      <ion-item no-padding no-lines text-wrap *ngIf="disciplinaForm.controls.ap2.invalid  && (disciplinaForm.controls.ap2.dirty || disciplinaForm.controls.ap2.touched)">
        <p color="danger">Nota inválida, insira uma nota entre 0.1 e 10</p>
      </ion-item>

      <ion-item no-padding>
        <ion-label floating>Nota da AP3</ion-label>
        <ion-input type="number" name="ap3" formControlName="ap3" [(ngModel)]="disciplina.notas.ap3" step="0.1"></ion-input>
      </ion-item>
      <ion-item no-padding no-lines text-wrap *ngIf="disciplinaForm.controls.ap3.invalid  && (disciplinaForm.controls.ap3.dirty || disciplinaForm.controls.ap3.touched)">
        <p color="danger">Nota inválida, insira uma nota entre 0.1 e 10</p>
      </ion-item>

    </ion-list>

    <button ion-button large block type="submit" [disabled]="!disciplinaForm.valid">Salvar</button>
    <button ion-button large block color="danger" (click)="excluir()" *ngIf="disciplina.updated_at">Apagar</button>
  </form>
</ion-content>
